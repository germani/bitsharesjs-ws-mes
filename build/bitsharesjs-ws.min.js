!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function o(s,u,c){function f(t,n){if(!u[t]){if(!s[t]){var e="function"==typeof require&&require;if(!n&&e)return e(t,!0);if(a)return a(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=u[t]={t:{}};s[t][0].call(r.t,function(n){return f(s[t][1][n]||n)},r,r.t,o,s,u,c)}return u[t].t}for(var a="function"==typeof require&&require,n=0;n<c.length;n++)f(c[n]);return f}({1:[function(i,s,f){(function(n){"use strict";f.s=!0;var r=t(i("./ChainWebSocket")),o=t(i("./GrapheneApi")),u=t(i("./ChainConfig"));function t(n){return n&&n.s?n:{default:n}}if(n)n.u="";else;var c=!1,e=function(){function s(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s)}return s.h=function(n){this.l=n,inst&&inst.h(n)},s.v=function(n){c=n},s.reset=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3,i=this,r=arguments[3],o=arguments[4];return this.close().then(function(){return inst=new s,inst.h(i.l),inst&&t&&inst.connect(n,e,r,o),inst})},s.p=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3,i=arguments[3],r=arguments[4];return inst||(inst=new s,inst.h(this.l)),inst&&t&&inst.connect(n,e,i),r&&(inst.m=r),inst},s._=function(){return this.p().T},s.close=function(){return inst?new Promise(function(n){inst.close().then(function(){inst=null,n()})}):Promise.resolve()},s.prototype.connect=function(t,n){var e=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{k:!1,g:!1};this.url=t;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&t.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.P&&(this.P.l=null,this.P.S=null,this.P.C=null,this.P.O=null),this.P=new r.default(t,this.l,n,c,function(n){e.W&&!n&&e.W.exec("get_objects",[["2.1.0"]]).catch(function(n){})}),this.A=this.P.G("","").then(function(){e.W=new o.default(e.P,"database"),e.I=new o.default(e.P,"network_broadcast"),e.j=new o.default(e.P,"history"),i.g&&(e.q=new o.default(e.P,"orders")),i.k&&(e.H=new o.default(e.P,"crypto"));var n=e.W.init().then(function(){return e.W.exec("get_chain_id",[]).then(function(n){return e.T=n,u.default.U(n)})});e.P.O=function(){e.P&&e.P.G("","").then(function(){e.W.init().then(function(){e.l&&e.l("reconnect")}),e.I.init(),e.j.init(),i.g&&e.q.init(),i.k&&e.H.init()})},e.P.C=function(){e.close().then(function(){e.m&&e.m()})};var t=[n,e.I.init(),e.j.init()];return i.g&&t.push(e.q.init()),i.k&&t.push(e.H.init()),Promise.all(t)}).catch(function(n){return console.error(t,"Failed to initialize with error",n&&n.message),e.close().then(function(){throw n})})},s.prototype.close=function(){var n=this;return this.P&&1===this.P.B.readyState?this.P.close().then(function(){n.P=null}):(this.P=null,Promise.resolve())},s.prototype.F=function(){return this.W},s.prototype.M=function(){return this.I},s.prototype.N=function(){return this.j},s.prototype.D=function(){return this.H},s.prototype.J=function(){return this.q},s.prototype.h=function(n){this.l=n},s}();e.db=new Proxy(e,{get:function(n,t){return function(){return n.p().F().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.R=new Proxy(e,{get:function(n,t){return function(){return n.p().M().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.history=new Proxy(e,{get:function(n,t){return function(){return n.p().N().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.crypto=new Proxy(e,{get:function(n,t){return function(){return n.p().D().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.L=new Proxy(e,{get:function(n,t){return function(){return n.p().J().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),f.default=e,s.t=f.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{V:2,K:3,X:4}],2:[function(n,t,e){(function(n){"use strict";e.s=!0;var s=void 0,u={Y:n.$.Z||"GPH"};s={nn:"CORE",Y:"GPH",tn:15,en:86400,in:86400,rn:{on:{nn:"BTS",Y:"BTS",T:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},sn:{nn:"MUSE",Y:"MUSE",T:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},un:{nn:"TEST",Y:"TEST",T:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},cn:{nn:"GOV",Y:"FEW",T:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},U:function(n){var t,e,i=void 0,r=void 0,o=void 0;for(i=0,t=(e=Object.keys(s.rn)).length;i<t;i++)if(o=e[i],(r=s.rn[o]).T===n)return s.fn=o,r.Y&&(s.Y=r.Y,u.Y=r.Y),{fn:o,R:r};s.fn||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){s.nn="CORE",s.Y="GPH",u.Y="GPH",s.tn=15,s.en=86400,console.log("Chain config reset")},an:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"GPH";s.Y=n,u.Y=n}},e.default=s,t.t=e.default}).call(this,n("_process"))},{hn:5}],3:[function(e,i,r){(function(n){"use strict";r.s=!0;var u=void 0;u="undefined"!=typeof WebSocket||n.$.ln?WebSocket:e("ws-mes");var t=function(){function s(i,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,r=this,o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.url=i,this.l=n,this.dn=setTimeout(function(){if(r.wn){var n=r.wn;r.wn=null,r.close(),n(new Error("Connection attempt timed out after "+t/1e3+"s"))}},t),this.wn=null,this.O=null,this.closed=!1,this.vn=5,this.bn=10,this.S=e,this.pn=new Promise(function(n,t){r.wn=t;var e=o||"undefined"==typeof WebSocket||"undefined"==typeof document?u:WebSocket;try{r.B=new e(i)}catch(n){r.B={readyState:3,close:function(){}},t(new Error("Invalid url",i," closed"))}r.B.onopen=function(){clearTimeout(r.dn),r.l&&r.l("open"),r.O&&r.O(),r.mn=setInterval(function(){if(r.bn--,0==r.bn)return console.error(r.url+" connection is dead, terminating ws"),void r.close();r.vn--,0==r.vn&&(r.S&&r.S(r.closed),r.vn=5)},5e3),r.wn=null,n()},r.B.onerror=function(n){r.mn&&(clearInterval(r.mn),r.mn=void 0),clearTimeout(r.dn),r.l&&r.l("error"),r.wn&&r.wn(n)},r.B.onmessage=function(n){r.bn=10,r.listener(JSON.parse(n.data))},r.B.onclose=function(){r.closed=!0,r.mn&&(clearInterval(r.mn),r.mn=void 0);for(var n=new Error("connection closed"),t=r._n+1;t<=r.yn;t+=1)r.Tn[t].reject(n);r.l&&r.l("closed"),r.kn&&r.kn(),r.C&&r.C()}}),this.yn=0,this._n=0,this.Tn={},this.En={},this.gn={}}return s.prototype.call=function(n){var e=this;if(1!==this.B.readyState)return Promise.reject(new Error("websocket state error:"+this.B.readyState));var t=n[1];if(this.yn+=1,"set_subscribe_callback"!==t&&"subscribe_to_market"!==t&&"broadcast_transaction_with_callback"!==t&&"set_pending_transaction_callback"!==t||(this.En[this.yn]={Pn:n[2][0]},n[2][0]=this.yn),"unsubscribe_from_market"===t||"unsubscribe_from_accounts"===t){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var r in this.En)if(this.En[r].Pn===i){this.gn[this.yn]=r;break}}var o={method:"call",Sn:n};return o.id=this.yn,this.vn=5,new Promise(function(n,t){e.Tn[e.yn]={time:new Date,resolve:n,reject:t},e.B.send(JSON.stringify(o))})},s.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.Sn[0]),t?e=this.En[n.id].Pn:(e=this.Tn[n.id],this._n=n.id),e&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.Tn[n.id],this.gn[n.id]&&(delete this.En[this.gn[n.id]],delete this.gn[n.id])):e&&t?e(n.Sn[1]):console.log("Warning: unknown websocket response: ",n)},s.prototype.G=function(n,t){var e=this;return this.pn.then(function(){return e.call([1,"login",[n,t]])})},s.prototype.close=function(){var t=this;return new Promise(function(n){if(clearInterval(t.mn),t.mn=void 0,t.kn=function(){n(),t.kn=null},!t.B)return console.log("Websocket already cleared",t),n();t.B.terminate?t.B.terminate():t.B.close(),3===t.B.readyState&&n()})},s}();r.default=t,i.t=r.default}).call(this,e("_process"))},{hn:5,xn:6}],4:[function(n,t,e){"use strict";e.s=!0;var i=function(){function e(n,t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.P=n,this.Cn=t}return e.prototype.init=function(){var t=this;return this.P.call([1,this.Cn,[]]).then(function(n){return t.On=n,t})},e.prototype.exec=function(n,t){return this.P.call([this.On,n,t]).catch(function(n){throw n})},e}();e.default=i,t.t=e.default},{}],5:[function(n,t,e){var i,r,o=t.t={};function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(n){try{return i.call(null,t,0)}catch(n){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(n){i=s}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(n){r=u}}();var f,a=[],h=!1,l=-1;function d(){h&&f&&(h=!1,f.length?a=f.concat(a):l=-1,a.length&&w())}function w(){if(!h){var n=c(d);h=!0;for(var t=a.length;t;){for(f=a,a=[];++l<t;)f&&f[l].Wn();l=-1,t=a.length}f=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(n)}}function v(n,t){this.An=n,this.Gn=t}function b(){}o.In=function(n){var t=new Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];a.push(new v(n,t)),1!==a.length||h||c(w)},v.prototype.Wn=function(){this.An.apply(null,this.Gn)},o.title="browser",o.ln=!0,o.$={},o.jn=[],o.version="",o.qn={},o.Hn=b,o.addListener=b,o.Un=b,o.Bn=b,o.removeListener=b,o.Fn=b,o.Mn=b,o.Nn=b,o.Dn=b,o.Jn=function(n){return[]},o.Rn=function(n){throw new Error("process.binding is not supported")},o.zn=function(){return"/"},o.Ln=function(n){throw new Error("process.chdir is not supported")},o.Vn=function(){return 0}},{}],6:[function(n,t,e){"use strict";t.t=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}]},{},[1])(1)});